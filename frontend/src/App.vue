<template>
  <div id="app">
    <el-container class="layout-container">
      <!-- å¤´éƒ¨ -->
      <el-header class="header">
        <div class="header-content">
          <div class="logo" @click="router.push('/')">
            <el-icon :size="28" color="#409EFF">
              <Tools />
            </el-icon>
            <span class="logo-text">WG-Tools</span>
          </div>
          <div class="nav-menu" ref="navMenuRef">
            <el-menu
              :default-active="$route.path"
              mode="horizontal"
              router
              :ellipsis="false"
              background-color="transparent"
              text-color="rgba(255, 255, 255, 0.9)"
              active-text-color="#ffffff"
              class="main-menu"
            >
              <el-menu-item index="/">é¦–é¡µ</el-menu-item>
              <el-sub-menu index="/text">
                <template #title>ğŸ“ æ–‡æœ¬å¤„ç†</template>
                <el-menu-item index="/text/json" data-category="text">
                  <span class="menu-icon">ğŸ“„</span>JSONå·¥å…·
                </el-menu-item>
                <el-menu-item index="/text/xml" data-category="text">
                  <span class="menu-icon">ğŸ“‹</span>XMLå·¥å…·
                </el-menu-item>
                <el-menu-item index="/text/compare" data-category="text">
                  <span class="menu-icon">ğŸ”</span>æ–‡æœ¬å¯¹æ¯”
                </el-menu-item>
                <el-menu-item index="/text/encrypt" data-category="text">
                  <span class="menu-icon">ğŸ”’</span>æ–‡æœ¬åŠ å¯†
                </el-menu-item>
                <el-menu-item index="/text/regex" data-category="text">
                  <span class="menu-icon">ğŸ¯</span>æ­£åˆ™è¡¨è¾¾å¼
                </el-menu-item>
                <el-menu-item index="/text/stats" data-category="text">
                  <span class="menu-icon">ğŸ“Š</span>æ–‡æœ¬ç»Ÿè®¡
                </el-menu-item>
                <el-menu-item index="/text/markdown-editor" data-category="text">
                  <span class="menu-icon">âœï¸</span>Markdownç¼–è¾‘å™¨
                </el-menu-item>
              </el-sub-menu>
              <el-sub-menu index="/encoding">
                <template #title>ğŸ”„ ç¼–ç è½¬æ¢</template>
                <el-menu-item index="/encoding/base64" data-category="encoding">
                  <span class="menu-icon">ğŸ”¤</span>Base64ç¼–ç 
                </el-menu-item>
                <el-menu-item index="/encoding/url" data-category="encoding">
                  <span class="menu-icon">ğŸŒ</span>URLç¼–ç 
                </el-menu-item>
                <el-menu-item index="/encoding/unicode" data-category="encoding">
                  <span class="menu-icon">ğŸ”£</span>Unicodeç¼–ç 
                </el-menu-item>
                <el-menu-item index="/encoding/html" data-category="encoding">
                  <span class="menu-icon">ğŸ·ï¸</span>HTMLå®ä½“
                </el-menu-item>
                <el-menu-item index="/encoding/base" data-category="encoding">
                  <span class="menu-icon">ğŸ”¢</span>è¿›åˆ¶è½¬æ¢
                </el-menu-item>
                <el-menu-item index="/converter/image-base64" data-category="encoding">
                  <span class="menu-icon">ğŸ–¼ï¸</span>å›¾ç‰‡Base64è½¬æ¢
                </el-menu-item>
              </el-sub-menu>
              <el-sub-menu index="/dev">
                <template #title>ğŸ› ï¸ å¼€å‘å·¥å…·</template>
                <el-menu-item index="/dev/color" data-category="dev">
                  <span class="menu-icon">ğŸ¨</span>é¢œè‰²å·¥å…·
                </el-menu-item>
                <el-menu-item index="/dev/color-picker" data-category="dev">
                  <span class="menu-icon">ğŸŒˆ</span>é«˜çº§é¢œè‰²é€‰æ‹©å™¨
                </el-menu-item>
                <el-menu-item index="/dev/uuid" data-category="dev">
                  <span class="menu-icon">ğŸ†”</span>UUIDç”Ÿæˆå™¨
                </el-menu-item>
                <el-menu-item index="/dev/qr-generator" data-category="dev">
                  <span class="menu-icon">ğŸ“±</span>äºŒç»´ç ç”Ÿæˆå™¨
                </el-menu-item>
                <el-menu-item index="/dev/random-data" data-category="dev">
                  <span class="menu-icon">ğŸ²</span>éšæœºæ•°æ®ç”Ÿæˆå™¨
                </el-menu-item>
                <el-menu-item index="/dev/code-formatter" data-category="dev">
                  <span class="menu-icon">ğŸ’»</span>ä»£ç æ ¼å¼åŒ–
                </el-menu-item>
                <el-menu-item index="/dev/file-diff" data-category="dev">
                  <span class="menu-icon">ğŸ“Š</span>æ–‡ä»¶å¯¹æ¯”
                </el-menu-item>
                <el-menu-item index="/dev/icon-generator" data-category="dev">
                  <span class="menu-icon">ğŸ–¼ï¸</span>å›¾æ ‡ç”Ÿæˆå™¨
                </el-menu-item>
                <el-menu-item index="/dev/cron" data-category="dev">
                  <span class="menu-icon">â°</span>Cronè¡¨è¾¾å¼
                </el-menu-item>
              </el-sub-menu>

              <el-sub-menu index="/time">
                <template #title>â° æ—¶é—´å·¥å…·</template>
                <el-menu-item index="/time/timestamp" data-category="time">
                  <span class="menu-icon">ğŸ•</span>æ—¶é—´æˆ³å·¥å…·
                </el-menu-item>
                <el-menu-item index="/time/calculator" data-category="time">
                  <span class="menu-icon">â±ï¸</span>æ—¶é—´è®¡ç®—å™¨
                </el-menu-item>
                <el-menu-item index="/time/worldclock" data-category="time">
                  <span class="menu-icon">ğŸŒ</span>ä¸–ç•Œæ—¶é’Ÿ
                </el-menu-item>
                <el-menu-item index="/converter/unit" data-category="time">
                  <span class="menu-icon">ğŸ“</span>å•ä½è½¬æ¢
                </el-menu-item>
              </el-sub-menu>
              <el-sub-menu index="/security">
                <template #title>ğŸ”’ å®‰å…¨å·¥å…·</template>
                <el-menu-item index="/security/password" data-category="security">
                  <span class="menu-icon">ğŸ”‘</span>å¯†ç ç”Ÿæˆå™¨
                </el-menu-item>
                <el-menu-item index="/security/hash" data-category="security">
                  <span class="menu-icon">ğŸ”</span>å“ˆå¸Œè®¡ç®—
                </el-menu-item>
              </el-sub-menu>
              <el-sub-menu index="/docs">
                <template #title>ğŸ“š æ–‡æ¡£</template>
                <el-menu-item index="/docs/git" data-category="docs">
                  <span class="menu-icon">ğŸ“</span>Git å¸¸ç”¨å‘½ä»¤
                </el-menu-item>
                <el-menu-item index="/docs/linux" data-category="docs">
                  <span class="menu-icon">ğŸ§</span>Linux å¸¸ç”¨å‘½ä»¤
                </el-menu-item>
                <el-menu-item index="/docs/docker" data-category="docs">
                  <span class="menu-icon">ğŸ³</span>Docker å¸¸ç”¨å‘½ä»¤
                </el-menu-item>
                <el-menu-item index="/docs/mysql" data-category="docs">
                  <span class="menu-icon">ğŸ—„ï¸</span>MySQL å¸¸ç”¨è¯­æ³•
                </el-menu-item>
                <el-menu-item index="/docs/java" data-category="docs">
                  <span class="menu-icon">â˜•</span>Java å¸¸ç”¨è¯­æ³•
                </el-menu-item>
            </el-sub-menu>
            <el-sub-menu index="/utility">
              <template #title>ğŸ› ï¸ å®ç”¨å·¥å…·</template>
              <el-menu-item index="/utility/bmi-calculator" data-category="utility">
                <span class="menu-icon">âš–ï¸</span>BMIè®¡ç®—å™¨
              </el-menu-item>
              <el-menu-item index="/utility/mortgage-calculator" data-category="utility">
                <span class="menu-icon">ğŸ¡</span>æˆ¿è´·è®¡ç®—å™¨
              </el-menu-item>
              <el-menu-item index="/utility/age-calculator" data-category="utility">
                <span class="menu-icon">ğŸ‚</span>å¹´é¾„è®¡ç®—å™¨
              </el-menu-item>
              <el-menu-item index="/utility/classroom-seating" data-category="utility">
                <span class="menu-icon">ğŸ«</span>ç­çº§åº§æ¬¡è¡¨
              </el-menu-item>
              <el-menu-item index="/utility/student-rollcall" data-category="utility">
                <span class="menu-icon">ğŸ“¢</span>å­¦ç”Ÿç‚¹åå™¨
              </el-menu-item>
            </el-sub-menu>
            <el-sub-menu 
              v-show="!isMobile && hiddenMenuItems.length === 0"
              index="/entertainment"
            >
              <template #title>ğŸ® å¨±ä¹å·¥å…·</template>
              <el-menu-item index="/entertainment/piano" data-category="entertainment">
                <span class="menu-icon">ğŸ¹</span>è™šæ‹Ÿé’¢ç´
              </el-menu-item>
              <el-menu-item index="/entertainment/snake" data-category="entertainment">
                <span class="menu-icon">ğŸ</span>è´ªåƒè›‡æ¸¸æˆ
              </el-menu-item>
              <el-menu-item index="/entertainment/quotes" data-category="entertainment">
                <span class="menu-icon">ğŸ’­</span>åŠ±å¿—è¯­å½•
              </el-menu-item>
            </el-sub-menu>
            <el-menu-item 
              v-show="!isMobile && hiddenMenuItems.length < 2"
              index="/about"
            >
              å…³äº
            </el-menu-item>
            
            <!-- æ›´å¤šèœå• - åœ¨ç©ºé—´ä¸è¶³æ—¶æ˜¾ç¤º -->
            <el-sub-menu 
              v-show="!isMobile && showMoreMenu" 
              index="/more"
              class="more-menu"
            >
              <template #title>
                <el-icon><More /></el-icon>
                æ›´å¤š
              </template>
              <el-menu-item 
                v-for="item in hiddenAboutItems" 
                :key="item.path"
                :index="item.path"
              >
                {{ item.title }}
              </el-menu-item>
              <el-sub-menu 
                v-for="item in hiddenEntertainmentItems" 
                :key="item.path"
                :index="item.path"
              >
                <template #title>{{ item.title }}</template>
                <el-menu-item index="/entertainment/piano">
                  <span class="menu-icon">ğŸ¹</span>è™šæ‹Ÿé’¢ç´
                </el-menu-item>
                <el-menu-item index="/entertainment/snake">
                  <span class="menu-icon">ğŸ</span>è´ªåƒè›‡æ¸¸æˆ
                </el-menu-item>
                <el-menu-item index="/entertainment/quotes">
                  <span class="menu-icon">ğŸ’­</span>åŠ±å¿—è¯­å½•
                </el-menu-item>
              </el-sub-menu>
            </el-sub-menu>
            </el-menu>
            
            <!-- ç§»åŠ¨ç«¯æ±‰å ¡èœå•æŒ‰é’® -->
            <div class="mobile-menu-btn" v-if="isMobile" @click="toggleMobileMenu">
              <el-icon size="24"><Menu /></el-icon>
            </div>
          </div>
        </div>
      </el-header>
      
      <!-- ç§»åŠ¨ç«¯ä¸‹æ‹‰èœå• -->
      <div 
        v-if="isMobile" 
        v-show="mobileMenuOpen"
        class="mobile-menu-dropdown"
        @click="closeMobileMenu"
      >
        <div class="mobile-menu-content" @click.stop>
          <div class="mobile-menu-item" @click="handleMobileMenuClick('/')">
            <span class="mobile-menu-icon">ğŸ </span>
            <span>é¦–é¡µ</span>
          </div>
          
          <div class="mobile-menu-category">
            <div class="mobile-category-title">ğŸ“ æ–‡æœ¬å¤„ç†</div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/text/json')">
              <span class="mobile-menu-icon">ğŸ“„</span>
              <span>JSONå·¥å…·</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/text/xml')">
              <span class="mobile-menu-icon">ğŸ“‹</span>
              <span>XMLå·¥å…·</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/text/compare')">
              <span class="mobile-menu-icon">ğŸ”</span>
              <span>æ–‡æœ¬å¯¹æ¯”</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/text/encrypt')">
              <span class="mobile-menu-icon">ğŸ”’</span>
              <span>æ–‡æœ¬åŠ å¯†</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/text/regex')">
              <span class="mobile-menu-icon">ğŸ¯</span>
              <span>æ­£åˆ™è¡¨è¾¾å¼</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/text/stats')">
              <span class="mobile-menu-icon">ğŸ“Š</span>
              <span>æ–‡æœ¬ç»Ÿè®¡</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/text/markdown-editor')">
              <span class="mobile-menu-icon">âœï¸</span>
              <span>Markdownç¼–è¾‘å™¨</span>
            </div>
          </div>
          
          <div class="mobile-menu-category">
            <div class="mobile-category-title">ğŸ”„ ç¼–ç è½¬æ¢</div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/encoding/base64')">
              <span class="mobile-menu-icon">ğŸ”¤</span>
              <span>Base64ç¼–ç </span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/encoding/url')">
              <span class="mobile-menu-icon">ğŸŒ</span>
              <span>URLç¼–ç </span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/encoding/unicode')">
              <span class="mobile-menu-icon">ğŸ”£</span>
              <span>Unicodeç¼–ç </span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/encoding/html')">
              <span class="mobile-menu-icon">ğŸ·ï¸</span>
              <span>HTMLå®ä½“</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/encoding/base')">
              <span class="mobile-menu-icon">ğŸ”¢</span>
              <span>è¿›åˆ¶è½¬æ¢</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/converter/image-base64')">
              <span class="mobile-menu-icon">ğŸ–¼ï¸</span>
              <span>å›¾ç‰‡Base64è½¬æ¢</span>
            </div>
          </div>
          
          <div class="mobile-menu-category">
            <div class="mobile-category-title">ğŸ› ï¸ å¼€å‘å·¥å…·</div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/dev/color')">
              <span class="mobile-menu-icon">ğŸ¨</span>
              <span>é¢œè‰²å·¥å…·</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/dev/color-picker')">
              <span class="mobile-menu-icon">ğŸŒˆ</span>
              <span>é«˜çº§é¢œè‰²é€‰æ‹©å™¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/dev/uuid')">
              <span class="mobile-menu-icon">ğŸ†”</span>
              <span>UUIDç”Ÿæˆå™¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/dev/qr-generator')">
              <span class="mobile-menu-icon">ğŸ“±</span>
              <span>äºŒç»´ç ç”Ÿæˆå™¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/dev/random-data')">
              <span class="mobile-menu-icon">ğŸ²</span>
              <span>éšæœºæ•°æ®ç”Ÿæˆå™¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/dev/code-formatter')">
              <span class="mobile-menu-icon">ğŸ’»</span>
              <span>ä»£ç æ ¼å¼åŒ–</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/dev/file-diff')">
              <span class="mobile-menu-icon">ğŸ“Š</span>
              <span>æ–‡ä»¶å¯¹æ¯”</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/dev/icon-generator')">
              <span class="mobile-menu-icon">ğŸ–¼ï¸</span>
              <span>å›¾æ ‡ç”Ÿæˆå™¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/dev/cron')">
              <span class="mobile-menu-icon">â°</span>
              <span>Cronè¡¨è¾¾å¼</span>
            </div>
          </div>
          
          <div class="mobile-menu-category">
            <div class="mobile-category-title">â° æ—¶é—´å·¥å…·</div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/time/timestamp')">
              <span class="mobile-menu-icon">ğŸ•</span>
              <span>æ—¶é—´æˆ³å·¥å…·</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/time/calculator')">
              <span class="mobile-menu-icon">â±ï¸</span>
              <span>æ—¶é—´è®¡ç®—å™¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/time/worldclock')">
              <span class="mobile-menu-icon">ğŸŒ</span>
              <span>ä¸–ç•Œæ—¶é’Ÿ</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/converter/unit')">
              <span class="mobile-menu-icon">ğŸ“</span>
              <span>å•ä½è½¬æ¢</span>
            </div>
          </div>
          
          <div class="mobile-menu-category">
            <div class="mobile-category-title">ğŸ”’ å®‰å…¨å·¥å…·</div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/security/password')">
              <span class="mobile-menu-icon">ğŸ”‘</span>
              <span>å¯†ç ç”Ÿæˆå™¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/security/hash')">
              <span class="mobile-menu-icon">ğŸ”</span>
              <span>å“ˆå¸Œè®¡ç®—</span>
            </div>
          </div>
          
          <div class="mobile-menu-category">
            <div class="mobile-category-title">ğŸ“š æ–‡æ¡£</div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/docs/git')">
              <span class="mobile-menu-icon">ğŸ“</span>
              <span>Git å¸¸ç”¨å‘½ä»¤</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/docs/linux')">
              <span class="mobile-menu-icon">ğŸ§</span>
              <span>Linux å¸¸ç”¨å‘½ä»¤</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/docs/docker')">
              <span class="mobile-menu-icon">ğŸ³</span>
              <span>Docker å¸¸ç”¨å‘½ä»¤</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/docs/mysql')">
              <span class="mobile-menu-icon">ğŸ—„ï¸</span>
              <span>MySQL å¸¸ç”¨è¯­æ³•</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/docs/java')">
              <span class="mobile-menu-icon">â˜•</span>
              <span>Java å¸¸ç”¨è¯­æ³•</span>
            </div>
          </div>
          
          <div class="mobile-menu-category">
            <div class="mobile-category-title">ğŸ› ï¸ å®ç”¨å·¥å…·</div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/utility/bmi-calculator')">
              <span class="mobile-menu-icon">âš–ï¸</span>
              <span>BMIè®¡ç®—å™¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/utility/mortgage-calculator')">
              <span class="mobile-menu-icon">ğŸ¡</span>
              <span>æˆ¿è´·è®¡ç®—å™¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/utility/age-calculator')">
              <span class="mobile-menu-icon">ğŸ‚</span>
              <span>å¹´é¾„è®¡ç®—å™¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/utility/classroom-seating')">
              <span class="mobile-menu-icon">ğŸ«</span>
              <span>ç­çº§åº§æ¬¡è¡¨</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/utility/student-rollcall')">
              <span class="mobile-menu-icon">ğŸ“¢</span>
              <span>å­¦ç”Ÿç‚¹åå™¨</span>
            </div>
          </div>
          
          <div class="mobile-menu-category">
            <div class="mobile-category-title">ğŸ® å¨±ä¹å·¥å…·</div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/entertainment/piano')">
              <span class="mobile-menu-icon">ğŸ¹</span>
              <span>è™šæ‹Ÿé’¢ç´</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/entertainment/snake')">
              <span class="mobile-menu-icon">ğŸ</span>
              <span>è´ªåƒè›‡æ¸¸æˆ</span>
            </div>
            <div class="mobile-menu-item" @click="handleMobileMenuClick('/entertainment/quotes')">
              <span class="mobile-menu-icon">ğŸ’­</span>
              <span>åŠ±å¿—è¯­å½•</span>
            </div>
          </div>
          
          <div class="mobile-menu-item" @click="handleMobileMenuClick('/about')">
            <span class="mobile-menu-icon">â„¹ï¸</span>
            <span>å…³äº</span>
          </div>
        </div>
      </div>
      
      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
      <el-main class="main-content">
        <router-view v-slot="{ Component }">
          <transition name="page-fade" mode="out-in">
            <component :is="Component" />
          </transition>
        </router-view>
      </el-main>
      
      <!-- åº•éƒ¨ -->
      <el-footer class="footer">
        <div class="footer-content">
          <p>&copy; 2024 WG-Tools. ä¸ºå¼€å‘è€…æä¾›ä¾¿æ·çš„åœ¨çº¿å·¥å…·æœåŠ¡.</p>
          <p class="footer-links">
            <a href="https://github.com" target="_blank">GitHub</a>
            <span class="divider">|</span>
            <a href="/about">å…³äºæˆ‘ä»¬</a>
            <span class="divider">|</span>
            <a href="mailto:support@wgtools.com">è”ç³»æˆ‘ä»¬</a>
          </p>
        </div>
      </el-footer>
    </el-container>
  </div>
</template>

<script setup lang="ts">
import { useRouter, useRoute } from 'vue-router'
import { ref, computed, onMounted, onUnmounted, nextTick, watch } from 'vue'
import { Tools, More, Menu } from '@element-plus/icons-vue'

const router = useRouter()
const route = useRoute()

// å“åº”å¼å¯¼èˆªçŠ¶æ€
const navMenuRef = ref()
const showMoreMenu = ref(false)
const isMobile = ref(false)
const hiddenMenuItems = ref<{path: string, title: string}[]>([])
const mobileMenuOpen = ref(false)

// è®¡ç®—å±æ€§ï¼šè¿‡æ»¤éšè—çš„èœå•é¡¹
const hiddenAboutItems = computed(() => 
  hiddenMenuItems.value.filter(item => item.path === '/about')
)

const hiddenEntertainmentItems = computed(() => 
  hiddenMenuItems.value.filter(item => item.path === '/entertainment')
)

// èœå•é¡¹é…ç½®
const menuItems = [
  { path: '/', title: 'é¦–é¡µ', priority: 1 },
  { path: '/text', title: 'ğŸ“ æ–‡æœ¬å¤„ç†', priority: 2 },
  { path: '/encoding', title: 'ğŸ”„ ç¼–ç è½¬æ¢', priority: 3 },
  { path: '/dev', title: 'ğŸ› ï¸ å¼€å‘å·¥å…·', priority: 4 },
  { path: '/time', title: 'â° æ—¶é—´å·¥å…·', priority: 5 },
  { path: '/security', title: 'ğŸ”’ å®‰å…¨å·¥å…·', priority: 6 },
  { path: '/docs', title: 'ğŸ“š æ–‡æ¡£', priority: 7 },
  { path: '/utility', title: 'ğŸ› ï¸ å®ç”¨å·¥å…·', priority: 8 },
  { path: '/entertainment', title: 'ğŸ® å¨±ä¹å·¥å…·', priority: 9 },
  { path: '/about', title: 'å…³äº', priority: 10 }
]

// æ£€æŸ¥å¯¼èˆªæ å®½åº¦å¹¶è°ƒæ•´æ˜¾ç¤º
const checkNavWidth = () => {
  if (!navMenuRef.value) return
  
  const windowWidth = window.innerWidth
  
  // ç§»åŠ¨ç«¯åˆ¤æ–­
  isMobile.value = windowWidth < 768
  
  if (isMobile.value) {
    showMoreMenu.value = false
    hiddenMenuItems.value = []
    return
  }
  
  // æ¡Œé¢ç«¯å“åº”å¼åˆ¤æ–­
  let hideItemsCount = 0
  
  if (windowWidth < 1200) {
    // ä¸­ç­‰å±å¹•ï¼šéšè—å¨±ä¹å·¥å…·å’Œå…³äº
    hideItemsCount = 2
  } else if (windowWidth < 1400) {
    // è¾ƒå¤§å±å¹•ï¼šéšè—å¨±ä¹å·¥å…·
    hideItemsCount = 1
  } else {
    // å¤§å±å¹•ï¼šæ˜¾ç¤ºæ‰€æœ‰èœå•
    hideItemsCount = 0
  }
  
  if (hideItemsCount > 0) {
    hiddenMenuItems.value = menuItems.slice(-hideItemsCount).map(item => ({
      path: item.path,
      title: item.title
    }))
    showMoreMenu.value = true
  } else {
    showMoreMenu.value = false
    hiddenMenuItems.value = []
  }
}

// ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
const toggleMobileMenu = () => {
  mobileMenuOpen.value = !mobileMenuOpen.value
}

// å…³é—­ç§»åŠ¨ç«¯èœå•
const closeMobileMenu = () => {
  mobileMenuOpen.value = false
}

// ç§»åŠ¨ç«¯èœå•é¡¹ç‚¹å‡»å¤„ç†
const handleMobileMenuClick = (path: string) => {
  router.push(path)
  closeMobileMenu()
}

// çª—å£å¤§å°å˜åŒ–ç›‘å¬
const handleResize = () => {
  nextTick(() => {
    checkNavWidth()
    // çª—å£å¤§å°å˜åŒ–æ—¶å…³é—­ç§»åŠ¨ç«¯èœå•
    if (mobileMenuOpen.value) {
      closeMobileMenu()
    }
  })
}

// ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œå…³é—­ç§»åŠ¨ç«¯èœå•
watch(() => route.path, () => {
  if (mobileMenuOpen.value) {
    closeMobileMenu()
  }
})

onMounted(() => {
  nextTick(() => {
    checkNavWidth()
  })
  window.addEventListener('resize', handleResize)
})

onUnmounted(() => {
  window.removeEventListener('resize', handleResize)
})
</script>

<style scoped>

.layout-container {
  min-height: 100vh;
}

.header {
  background: rgba(255, 255, 255, 0.95);
  border-bottom: 1px solid rgba(102, 126, 234, 0.2);
  padding: 0;
  height: 70px !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(20px);
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
}

.header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  opacity: 0.8;
  z-index: -1;
}

.header-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 100%;
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 30px;
  overflow: hidden;
}

.logo {
  display: flex;
  align-items: center;
  cursor: pointer;
  font-size: 22px;
  font-weight: bold;
  color: #ffffff;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  transition: all 0.3s ease;
  white-space: nowrap;
  flex-shrink: 0;
  min-width: 160px;
  margin-right: 30px;
}

.logo:hover {
  transform: translateY(-2px);
  text-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
}

.logo-text {
  margin-left: 8px;
}

.nav-menu {
  flex: 1;
  display: flex;
  justify-content: center;
  min-width: 0;
  position: relative;
}

.mobile-menu-btn {
  display: none;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.1);
  cursor: pointer;
  transition: all 0.3s ease;
  color: rgba(255, 255, 255, 0.9);
}

.mobile-menu-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  color: #ffffff;
}

.more-menu {
  margin-left: auto;
}

.main-content {
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  min-height: calc(100vh - 130px);
  padding: 30px;
  padding-top: 100px;
  position: relative;
}

.main-content::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxwYXR0ZXJuIGlkPSJncmlkIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpIiBzdHJva2Utd2lkdGg9IjEiLz4KICAgIDwvcGF0dGVybj4KICA8L2RlZnM+CiAgPHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIgLz4KPC9zdmc+') repeat;
  opacity: 0.3;
  pointer-events: none;
}

.footer {
  background: #fff;
  border-top: 1px solid #e4e7ed;
  height: 60px !important;
  display: flex;
  align-items: center;
}

.footer-content {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  text-align: center;
  color: #909399;
  font-size: 12px;
}

.footer-links {
  margin-top: 4px;
}

.footer-links a {
  color: #909399;
  text-decoration: none;
}

.footer-links a:hover {
  color: #409EFF;
}

.divider {
  margin: 0 8px;
}

:deep(.el-menu--horizontal) {
  border-bottom: none;
}

:deep(.el-menu--horizontal > .el-menu-item) {
  border-bottom: 2px solid transparent;
}

:deep(.el-menu--horizontal > .el-menu-item:hover) {
  background-color: rgba(255, 255, 255, 0.1);
  color: #ffffff !important;
}

:deep(.el-sub-menu) {
  color: rgba(255, 255, 255, 0.9) !important;
}

:deep(.el-sub-menu__title) {
  color: rgba(255, 255, 255, 0.9) !important;
}

:deep(.el-sub-menu__title:hover) {
  background-color: rgba(255, 255, 255, 0.1) !important;
  color: #ffffff !important;
}

:deep(.el-menu--popup) {
  background: #ffffff !important;
  backdrop-filter: blur(20px);
  border: 1px solid rgba(102, 126, 234, 0.2);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
  border-radius: 16px;
  padding: 12px 0;
  overflow: hidden;
  position: relative;
}

:deep(.el-menu--popup::before) {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%);
  background-size: 200% 100%;
  animation: shimmer 3s ease-in-out infinite;
}

:deep(.el-menu--popup .el-menu-item) {
  color: #1f2937 !important;
  font-weight: 500;
  padding: 14px 24px;
  margin: 3px 12px;
  border-radius: 12px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  gap: 12px;
}

:deep(.el-menu--popup .el-menu-item::before) {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  width: 4px;
  height: 100%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  transform: scaleY(0);
  transition: transform 0.3s ease;
  border-radius: 0 2px 2px 0;
}

:deep(.el-menu--popup .el-menu-item::after) {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
  opacity: 0;
  transition: opacity 0.3s ease;
  border-radius: 12px;
}

:deep(.el-menu--popup .el-menu-item:hover) {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
  color: #ffffff !important;
  transform: translateX(8px) scale(1.02);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
}

:deep(.el-menu--popup .el-menu-item:hover::before) {
  transform: scaleY(1);
}

:deep(.el-menu--popup .el-menu-item:hover::after) {
  opacity: 1;
}

/* ä¸ºç‰¹å®šèœå•é¡¹æ·»åŠ å›¾æ ‡æ ·å¼ */
:deep(.el-menu--popup .el-menu-item[data-category="dev"]) {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%);
}

:deep(.el-menu--popup .el-menu-item[data-category="dev"]:hover) {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
}

:deep(.el-menu--popup .el-menu-item[data-category="convert"]) {
  background: linear-gradient(135deg, rgba(249, 115, 22, 0.05) 0%, rgba(234, 88, 12, 0.05) 100%);
}

:deep(.el-menu--popup .el-menu-item[data-category="convert"]:hover) {
  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%) !important;
}

:deep(.el-menu--popup .el-menu-item[data-category="time"]) {
  background: linear-gradient(135deg, rgba(14, 165, 233, 0.05) 0%, rgba(2, 132, 199, 0.05) 100%);
}

:deep(.el-menu--popup .el-menu-item[data-category="time"]:hover) {
  background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%) !important;
}

:deep(.el-menu--popup .el-menu-item[data-category="security"]) {
  background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, rgba(220, 38, 38, 0.05) 100%);
}

:deep(.el-menu--popup .el-menu-item[data-category="security"]:hover) {
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
}

:deep(.el-menu--popup .el-menu-item[data-category="docs"]) {
  background: linear-gradient(135deg, rgba(168, 85, 247, 0.05) 0%, rgba(147, 51, 234, 0.05) 100%);
}

:deep(.el-menu--popup .el-menu-item[data-category="docs"]:hover) {
  background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%) !important;
}

:deep(.el-menu--popup .el-menu-item[data-category="text"]) {
  background: linear-gradient(135deg, rgba(34, 197, 94, 0.05) 0%, rgba(22, 163, 74, 0.05) 100%);
}

:deep(.el-menu--popup .el-menu-item[data-category="text"]:hover) {
  background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%) !important;
}

:deep(.el-menu--popup .el-menu-item[data-category="encoding"]) {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(37, 99, 235, 0.05) 100%);
}

:deep(.el-menu--popup .el-menu-item[data-category="encoding"]:hover) {
  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important;
}

:deep(.el-menu--popup .el-menu-item[data-category="utility"]) {
  background: linear-gradient(135deg, rgba(20, 184, 166, 0.05) 0%, rgba(13, 148, 136, 0.05) 100%);
}

:deep(.el-menu--popup .el-menu-item[data-category="utility"]:hover) {
  background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%) !important;
}

:deep(.el-menu--popup .el-menu-item[data-category="entertainment"]) {
  background: linear-gradient(135deg, rgba(236, 72, 153, 0.05) 0%, rgba(219, 39, 119, 0.05) 100%);
}

:deep(.el-menu--popup .el-menu-item[data-category="entertainment"]:hover) {
  background: linear-gradient(135deg, #ec4899 0%, #db2777 100%) !important;
}

/* èœå•å›¾æ ‡æ ·å¼ */
.menu-icon {
  display: inline-block;
  margin-right: 8px;
  font-size: 16px;
  width: 20px;
  text-align: center;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

:deep(.el-menu--horizontal > .el-menu-item.is-active) {
  border-bottom-color: #409EFF;
}


.el-menu--horizontal .el-menu .el-menu-item, .el-menu--horizontal .el-menu .el-sub-menu__title{
  color: #000;
}

/* é¡µé¢åˆ‡æ¢åŠ¨ç”» */
.page-fade-enter-active,
.page-fade-leave-active {
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.page-fade-enter-from {
  opacity: 0;
  transform: translateY(20px) scale(0.98);
}

.page-fade-leave-to {
  opacity: 0;
  transform: translateY(-20px) scale(1.02);
}

.page-fade-enter-to,
.page-fade-leave-from {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* å¢å¼ºæ•´ä½“åŠ¨ç”»æ•ˆæœ */
* {
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  line-height: 1.6;
  color: #2c3e50;
  scroll-behavior: smooth;
}

/* ä¼˜åŒ–æ»šåŠ¨æ¡æ ·å¼ */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 4px;
  transition: background 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
}

/* å¢å¼ºå¡ç‰‡æ‚¬åœæ•ˆæœ */
.tool-card,
.hero-section,
.card {
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.tool-card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15) !important;
}

/* æŒ‰é’®å¢å¼ºæ•ˆæœ */
.el-button {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

.el-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

/* å“åº”å¼å¯¼èˆª */
@media (max-width: 1200px) {
  .header-content {
    max-width: 100%;
    padding: 0 20px;
  }
  
  .logo {
    min-width: 140px;
    margin-right: 20px;
  }
}

@media (max-width: 992px) {
  .header-content {
    padding: 0 15px;
  }
  
  .logo {
    min-width: 120px;
    margin-right: 15px;
    font-size: 20px;
  }
  
  :deep(.el-menu--horizontal .el-menu-item) {
    padding: 0 12px;
    font-size: 14px;
  }
  
  :deep(.el-sub-menu__title) {
    padding: 0 12px;
    font-size: 14px;
  }
}

@media (max-width: 768px) {
  .nav-menu {
    justify-content: flex-end;
  }
  
  .main-menu {
    display: none;
  }
  
  .mobile-menu-btn {
    display: flex;
  }
  
  .header-content {
    padding: 0 15px;
  }
  
  .logo {
    min-width: 100px;
    margin-right: 10px;
    font-size: 18px;
  }
}

@media (max-width: 480px) {
  .header-content {
    padding: 0 10px;
  }
  
  .logo {
    min-width: 80px;
    font-size: 16px;
  }
  
  .logo-text {
    margin-left: 6px;
  }
}

/* ç§»åŠ¨ç«¯ä¸‹æ‹‰èœå•æ ·å¼ */
.mobile-menu-dropdown {
  position: fixed;
  top: 70px;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 999;
  backdrop-filter: blur(4px);
  animation: fadeIn 0.3s ease;
}

.mobile-menu-content {
  background: #ffffff;
  max-height: calc(100vh - 70px);
  overflow-y: auto;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.mobile-menu-item {
  display: flex;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid #f0f0f0;
  cursor: pointer;
  transition: all 0.3s ease;
  background: #ffffff;
}

.mobile-menu-item:hover {
  background: #f8fafc;
  transform: translateX(4px);
}

.mobile-menu-item:active {
  background: #e2e8f0;
}

.mobile-menu-icon {
  font-size: 18px;
  margin-right: 12px;
  width: 24px;
  text-align: center;
}

.mobile-menu-category {
  border-bottom: 2px solid #e2e8f0;
}

.mobile-category-title {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #ffffff;
  padding: 12px 20px;
  font-weight: 600;
  font-size: 14px;
  position: sticky;
  top: 0;
  z-index: 10;
}

.mobile-menu-category .mobile-menu-item {
  padding-left: 32px;
  border-bottom: 1px solid #f8fafc;
}

.mobile-menu-category .mobile-menu-item:last-child {
  border-bottom: none;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
</style>
